Copyright 2016 Gregory BryantLicensed under the Apache License, Version 2.0 (the "License");you may not use this file except in compliance with the License.You may obtain a copy of the License at    http://www.apache.org/licenses/LICENSE-2.0Unless required by applicable law or agreed to in writing, softwaredistributed under the License is distributed on an "AS IS" BASIS,WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.See the License for the specific language governing permissions andlimitations under the License./***********************************************************************/#include "ProjectHeaders.h"void Fill_CFRG(Key *projectKey){Str255						pStr;if(projectKey){	if(projectKey->cfrgb)	{		HideControl(gAppControls.p1mach);		ShowControl(gAppControls.p1cfrg);		SetControlValue(gAppControls.p1Target,1);				if(projectKey->asm_){		FileRef_GetFileName(projectKey->asm_,pStr);		SetControlData(gAppControls.cfrgSourceName, kControlEditTextPart,kControlEditTextTextTag,pStr[0],pStr+1);}		else{SetControlData(gAppControls.cfrgSourceName, kControlEditTextPart,kControlEditTextTextTag,0,pStr+1);}		if(projectKey->rsrc){		FileRef_GetFileName(projectKey->rsrc,pStr);		SetControlData(gAppControls.cfrgResourceName, kControlEditTextPart,kControlEditTextTextTag,pStr[0],pStr+1);}		else{SetControlData(gAppControls.cfrgResourceName, kControlEditTextPart,kControlEditTextTextTag,0,pStr+1);}		if(projectKey->data){		FileRef_GetFileName(projectKey->data,pStr);		SetControlData(gAppControls.cfrgDataName, kControlEditTextPart,kControlEditTextTextTag,pStr[0],pStr+1);}		else{SetControlData(gAppControls.cfrgDataName, kControlEditTextPart,kControlEditTextTextTag,0,pStr+1);}		if(projectKey->reloc){		FileRef_GetFileName(projectKey->reloc,pStr);		SetControlData(gAppControls.cfrgRelocationName, kControlEditTextPart,kControlEditTextTextTag,pStr[0],pStr+1);}		else{SetControlData(gAppControls.cfrgRelocationName, kControlEditTextPart,kControlEditTextTextTag,0,pStr+1);}		hex2char(projectKey->mainOffset,(char*)pStr+1);pStr[0]=8;		MyPStrAdd("\p$",pStr,pStr);		SetControlData(gAppControls.cfrgmain, kControlEditTextPart,kControlEditTextTextTag,pStr[0],pStr+1);		hex2char(projectKey->initOffset,(char*)pStr+1);pStr[0]=8;		MyPStrAdd("\p$",pStr,pStr);		SetControlData(gAppControls.cfrginit, kControlEditTextPart,kControlEditTextTextTag,pStr[0],pStr+1);		hex2char(projectKey->termOffset,(char*)pStr+1);pStr[0]=8;		MyPStrAdd("\p$",pStr,pStr);		SetControlData(gAppControls.cfrgterm, kControlEditTextPart,kControlEditTextTextTag,pStr[0],pStr+1);		SetControlData(gAppControls.cfrgProduct, kControlEditTextPart,kControlEditTextTextTag,projectKey->target[0],projectKey->target+1);		SetControlData(gAppControls.cfrgType, kControlEditTextPart,kControlEditTextTextTag,4,&projectKey->type);		SetControlData(gAppControls.cfrgCreator, kControlEditTextPart,kControlEditTextTextTag,4,&projectKey->creator);		DrawControls(gAppWindow);	}	else if(projectKey->machb)	{	HideControl(gAppControls.p1cfrg);	ShowControl(gAppControls.p1mach);	SetControlValue(gAppControls.p1Target,2);	if(projectKey->asm_){	FileRef_GetFileName(projectKey->asm_,pStr);	SetControlData(gAppControls.machSourceName, kControlEditTextPart,kControlEditTextTextTag,pStr[0],pStr+1);}	else{SetControlData(gAppControls.machSourceName, kControlEditTextPart,kControlEditTextTextTag,0,pStr+1);}	if(projectKey->machinfo){	FileRef_GetFileName(projectKey->machinfo,pStr);	SetControlData(gAppControls.machMachInfoName, kControlEditTextPart,kControlEditTextTextTag,pStr[0],pStr+1);}	else{SetControlData(gAppControls.machMachInfoName, kControlEditTextPart,kControlEditTextTextTag,0,pStr+1);}	SetControlData(gAppControls.machProduct, kControlEditTextPart,kControlEditTextTextTag,projectKey->target[0],projectKey->target+1);	}}else{SetControlData(gAppControls.cfrgSourceName, kControlEditTextPart,kControlEditTextTextTag,0,pStr+1);SetControlData(gAppControls.cfrgResourceName, kControlEditTextPart,kControlEditTextTextTag,0,pStr+1);SetControlData(gAppControls.cfrgDataName, kControlEditTextPart,kControlEditTextTextTag,0,pStr+1);SetControlData(gAppControls.cfrgRelocationName, kControlEditTextPart,kControlEditTextTextTag,0,pStr+1);pStr[0]='$';SetControlData(gAppControls.cfrgmain, kControlEditTextPart,kControlEditTextTextTag,1,pStr);SetControlData(gAppControls.cfrginit, kControlEditTextPart,kControlEditTextTextTag,1,pStr);SetControlData(gAppControls.cfrgterm, kControlEditTextPart,kControlEditTextTextTag,1,pStr);SetControlData(gAppControls.cfrgProduct, kControlEditTextPart,kControlEditTextTextTag,0,pStr+1);SetControlData(gAppControls.cfrgType, kControlEditTextPart,kControlEditTextTextTag,0,pStr+1);SetControlData(gAppControls.cfrgCreator, kControlEditTextPart,kControlEditTextTextTag,0,pStr+1);DrawControls(gAppWindow);}}void ClearKey(Key *key){DataExport			*currDEB,*temp;key->dirty=0;if(key->keyFileRef){FileRef_Dispose(key->keyFileRef);key->keyFileRef=0;}if(key->asm_){FileRef_Dispose(key->asm_);key->asm_=0;}if(key->rsrc){FileRef_Dispose(key->rsrc);key->rsrc=0;}if(key->rsrcmb){FileRef_Dispose(key->rsrcmb);key->rsrcmb=0;}if(key->data){FileRef_Dispose(key->data);key->data=0;}if(key->secoff){FileRef_Dispose(key->secoff);key->secoff=0;}if(key->reloc){FileRef_Dispose(key->reloc);key->reloc=0;}key->target[0]=0;key->type=0;key->creator=0;key->asmb=0;key->rsrcb=0;key->rsrcmbb=0;key->datab=0;key->secoffb=0;key->secoffob=0;key->relocb=0;key->machb=0;key->cfrgb=1;key->intelb=0;if(key->deb){key->deb=0;if(key->de.label){DisposePtr(key->de.label);}currDEB = key->de.next;while(currDEB){DisposePtr(currDEB->label);temp=currDEB;currDEB=currDEB->next;DisposePtr((char*)temp);}}key->mainOffset=0;key->initOffset=0;key->termOffset=0;}