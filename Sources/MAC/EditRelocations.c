Copyright 2016 Gregory BryantLicensed under the Apache License, Version 2.0 (the "License");you may not use this file except in compliance with the License.You may obtain a copy of the License at    http://www.apache.org/licenses/LICENSE-2.0Unless required by applicable law or agreed to in writing, softwaredistributed under the License is distributed on an "AS IS" BASIS,WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.See the License for the specific language governing permissions andlimitations under the License./***********************************************************************/#include "ProjectHeaders.h"static pascal OSStatus Relocations_GetSetItemData(ControlRef browser, DataBrowserItemID itemID, DataBrowserPropertyID property, DataBrowserItemDataRef itemData, Boolean changeValue);static pascal Boolean Relocations_AddDragItem(ControlRef browser, DragReference theDrag, DataBrowserItemID itemID, ItemReference* itemRef);static pascal Boolean Relocations_AcceptDrag(ControlRef browser, DragReference theDrag, DataBrowserItemID itemID);static pascal Boolean Relocations_ReceiveDrag(ControlRef browser, DragReference theDrag, DataBrowserItemID itemID);static pascal Boolean Relocations_ItemComparison(ControlRef browser, DataBrowserItemID itemOneID, DataBrowserItemID itemTwoID, DataBrowserPropertyID sortProperty);static pascal void Relocations_ItemNotification(ControlRef browser, DataBrowserItemID itemID, DataBrowserItemNotification message);pascal void Relocations_CustomDrawItem(ControlRef browser,DataBrowserItemID item,DataBrowserPropertyID property,									DataBrowserItemState itemState,const Rect *theRect,SInt16 gdDepth,Boolean colorDevice);pascal Boolean Relocations_CustomHitTest(ControlRef browser,DataBrowserItemID itemID,DataBrowserPropertyID property,const Rect *theRect,const Rect *mouseRect);pascal SInt16 Relocations_CustomTracking(ControlRef browser,DataBrowserItemID itemID,DataBrowserPropertyID property,const Rect *theRect,Point startPt,EventModifiers modifiers);pascal void Relocations_CustomDragRegion(ControlRef browser,DataBrowserItemID itemID,DataBrowserPropertyID property,const Rect *theRect,RgnHandle dragRgn);void EditRelocations(Key	*theKey){Rect								rect;DataBrowserListViewColumnDesc		listColumn;Boolean								frameAndFocus=false;DataBrowserCallbacks 				myCallbacks;DataBrowserCustomCallbacks			myCustomCallbacks;OSErr								err;ControlID							controlID;IBNibRef							nibRef;Boolean								dirty;FSRef					fileRef;FSCatalogInfo			catInfo;FileReference			destRef;LongChain				*obtained;DataBrowserItemID				ids;			EventTypeSpec		list[3];long				controlOwner,controlType,arg;long				winType;WindowRef			tempWin;err = CreateNibReference(CFSTR("RelocationEditor"), &nibRef);if(err){DebugFunction("\pError Creating Nib Reference: RelocationEditor");}err = CreateWindowFromNib(nibRef, CFSTR("RelocationEditor"), &gRelocEditorWindow);if(err){DebugFunction("\pError Creating Window: RelocationEditor");}SetAutomaticControlDragTrackingEnabledForWindow(gRelocEditorWindow, true);InstallStandardEventHandler(GetWindowEventTarget(gRelocEditorWindow));list[0].eventClass=kEventClassWindow;list[0].eventKind=kEventWindowClose;InstallWindowEventHandler(gRelocEditorWindow,gWinCloseHandlerUPP,1,list,&gData,NULL);dirty = false;SetWindowProperty(gRelocEditorWindow,kCreatorCode,kWindowDirty,sizeof(Boolean),&dirty);winType = kRelocationEditor;SetWindowProperty(gRelocEditorWindow,kCreatorCode,kWindowType,sizeof(long),&winType);list[0].eventClass=kEventClassKeyboard;list[0].eventKind=kEventRawKeyDown;list[1].eventClass=kEventClassKeyboard;list[1].eventKind=kEventRawKeyRepeat;list[2].eventClass=kEventClassMouse;list[2].eventKind=kEventMouseDown;err = InstallWindowEventHandler(gRelocEditorWindow,gTempMouseDownHandlerUPP,3,list,&gData,NULL);err = CreateWindowFromNib(gSaveChangesNibRef, CFSTR("SaveChangesWindow"), &tempWin);if(err){DebugFunction("\pError Creating Window: SaveChangesWindow");}winType = kAskSave;SetWindowProperty(tempWin,kCreatorCode,kWindowType,sizeof(long),&winType);SetWindowProperty(gRelocEditorWindow,kCreatorCode,kSaveSheet,sizeof(WindowRef),&tempWin);arg=0;SetWindowProperty(gRelocEditorWindow,kCreatorCode,kFileReference,sizeof(FileReference*),&arg);list[0].eventClass=kEventClassKeyboard;list[0].eventKind=kEventRawKeyDown;list[1].eventClass=kEventClassKeyboard;list[1].eventKind=kEventRawKeyRepeat;InstallWindowEventHandler(tempWin,gKeyDownHandlerUPP,2,list,&gData,NULL);controlID.signature='rloc';controlID.id=kRLOC_DataBrowser;GetControlByID(gRelocEditorWindow,&controlID,&gAppControls.rlocBrowser);controlID.signature='rloc';controlID.id=kRLOC_Add;GetControlByID(gRelocEditorWindow,&controlID,&gAppControls.rlocAdd);controlID.signature='rloc';controlID.id=kRLOC_Delete;GetControlByID(gRelocEditorWindow,&controlID,&gAppControls.rlocDelete);controlID.signature='rloc';controlID.id=kRLOC_MessageLabel;GetControlByID(gRelocEditorWindow,&controlID,&gAppControls.rlocMessageLabel);controlID.signature='rloc';controlID.id=kRLOC_MessageText;GetControlByID(gRelocEditorWindow,&controlID,&gAppControls.rlocMessageText);DeactivateControl(gAppControls.rlocDelete);myCallbacks.version = kDataBrowserLatestCallbacks;InitDataBrowserCallbacks(&myCallbacks);myCallbacks.u.v1.itemDataCallback = NewDataBrowserItemDataUPP(Relocations_GetSetItemData);myCallbacks.u.v1.addDragItemCallback = NewDataBrowserAddDragItemUPP(Relocations_AddDragItem);myCallbacks.u.v1.acceptDragCallback = NewDataBrowserAcceptDragUPP(Relocations_AcceptDrag);myCallbacks.u.v1.receiveDragCallback = NewDataBrowserReceiveDragUPP(Relocations_ReceiveDrag);myCallbacks.u.v1.itemCompareCallback = NewDataBrowserItemCompareUPP(Relocations_ItemComparison);myCallbacks.u.v1.itemNotificationCallback = NewDataBrowserItemNotificationUPP(Relocations_ItemNotification);SetDataBrowserCallbacks(gAppControls.rlocBrowser, &myCallbacks);myCustomCallbacks.version = kDataBrowserLatestCustomCallbacks;InitDataBrowserCustomCallbacks(&myCustomCallbacks);myCustomCallbacks.u.v1.drawItemCallback = NewDataBrowserDrawItemUPP(Relocations_CustomDrawItem);myCustomCallbacks.u.v1.hitTestCallback = NewDataBrowserHitTestUPP(Relocations_CustomHitTest);myCustomCallbacks.u.v1.trackingCallback = NewDataBrowserTrackingUPP(Relocations_CustomTracking);myCustomCallbacks.u.v1.dragRegionCallback = NewDataBrowserItemDragRgnUPP(Relocations_CustomDragRegion);SetDataBrowserCustomCallbacks(gAppControls.rlocBrowser, &myCustomCallbacks);SetControlDragTrackingEnabled(gAppControls.rlocBrowser,true);SetAutomaticControlDragTrackingEnabledForWindow(gRelocEditorWindow, true);SetDataBrowserTableViewGeometry(gAppControls.rlocBrowser,1,0);listColumn.propertyDesc.propertyID = kMnemonicColumn;listColumn.propertyDesc.propertyType = kDataBrowserPopupMenuType;listColumn.propertyDesc.propertyFlags = kDataBrowserPropertyIsMutable+kDataBrowserTableViewSelectionColumn;//+kDataBrowserListViewSortableColumn;listColumn.headerBtnDesc.version = kDataBrowserListViewLatestHeaderDesc;listColumn.headerBtnDesc.minimumWidth  = 230;listColumn.headerBtnDesc.maximumWidth  = 230;listColumn.headerBtnDesc.titleOffset = 0;listColumn.headerBtnDesc.titleString = CFSTR("Mnemonic");listColumn.headerBtnDesc.initialOrder = kDataBrowserOrderIncreasing;listColumn.headerBtnDesc.btnFontStyle.just = teCenter;listColumn.headerBtnDesc.btnFontStyle.font = kControlFontViewSystemFont;listColumn.headerBtnDesc.btnFontStyle.size = 1;listColumn.headerBtnDesc.btnFontStyle.style = normal;listColumn.headerBtnDesc.btnContentInfo.contentType = kControlContentTextOnly;AddDataBrowserListViewColumn(gAppControls.rlocBrowser,&listColumn,1);/*listColumn.headerBtnDesc.minimumWidth  = 80;listColumn.headerBtnDesc.maximumWidth  = 80;listColumn.headerBtnDesc.titleString = CFSTR("Argument");listColumn.propertyDesc.propertyID = kArgumentColumn;listColumn.propertyDesc.propertyType = kDataBrowserTextType;AddDataBrowserListViewColumn(gAppControls.rlocBrowser,&listColumn,2);*/listColumn.headerBtnDesc.minimumWidth  = 40;listColumn.headerBtnDesc.maximumWidth  = 40;listColumn.headerBtnDesc.titleString = CFSTR("");listColumn.propertyDesc.propertyID = 'DRAG';listColumn.propertyDesc.propertyType = kDataBrowserIconType;AddDataBrowserListViewColumn(gAppControls.rlocBrowser,&listColumn,0);listColumn.headerBtnDesc.minimumWidth  = 200;listColumn.headerBtnDesc.maximumWidth  = 200;listColumn.headerBtnDesc.titleString = CFSTR("Argument");listColumn.propertyDesc.propertyID = kArgumentColumn;listColumn.propertyDesc.propertyType = kDataBrowserCustomType;AddDataBrowserListViewColumn(gAppControls.rlocBrowser,&listColumn,1000); err = CreateNibReference(CFSTR("RelocationEditor"), &nibRef);if(err){DebugFunction("\pError Creating Nib Reference: RelocationEditor");}CreateMenuFromNib(nibRef,CFSTR("RelocationOpcodes"),&gRelocInstructionMenu);DisposeNibReference(nibRef);if(theKey){obtained = ObtainRelocationChain(theKey);ActivateControl(gAppControls.rlocDelete);}else{obtained=0;}while(obtained){LongChainAdd(&gRelocationEditorItems,gRelocationEditorItemEnum,obtained->opcode,"\p"/*"\pundef"*/,obtained->args);ids=gRelocationEditorItemEnum;gRelocationEditorItemEnum++;err =  AddDataBrowserItems(gAppControls.rlocBrowser,kDataBrowserNoItem,1,&ids,0);if(err){DebugFunction("\pAddDataBrowserItems Error");}obtained=obtained->next;}SetDataBrowserTableViewRowHeight(gAppControls.rlocBrowser,28);SetRect(&rect,0,0,35,16);CreateEditTextControl(gRelocEditorWindow,&rect,CFSTR(""),false,false,0,&gRelocEditCellControl);EmbedControl(gRelocEditCellControl,gAppControls.rlocBrowser);InstallStandardEventHandler(GetControlEventTarget(gRelocEditCellControl));controlOwner=kPEF_Reloc;SetControlProperty(gRelocEditCellControl,kCreatorCode,kControlOwner,sizeof(long),&controlOwner);SetControlData(gRelocEditCellControl,kControlEditTextPart,kControlEditTextValidationProcTag,sizeof(ControlEditTextValidationUPP),&gEditTextValidaterUPP);SetControlData(gRelocEditCellControl,kControlEditTextPart,kControlEditTextKeyFilterTag,sizeof(ControlKeyFilterUPP),&gEditTextKeyFilterUPP);ShowWindow(gRelocEditorWindow);}static pascal OSStatus Relocations_GetSetItemData(ControlRef browser, DataBrowserItemID itemID, DataBrowserPropertyID property, DataBrowserItemDataRef itemData, Boolean changeValue){OSErr		err;IBNibRef	nibRef;MenuRef		menu;long		temp;IconRef		iconRef;RGBColor	rgbColor;LongChain	*lc;CFStringRef cfStr;Str255		pStr;Boolean		dirty;Rect							rect;EventTypeSpec					list[3];long							data,i;rgbColor.red	=	255*257;rgbColor.green	=	0*257;rgbColor.blue	=	0*257;switch(property){	case 'DRAG':	{			GetIconRef(kOnSystemDisk,kSystemIconsCreator,kGenericComponentIcon,&iconRef);			SetDataBrowserItemDataIcon(itemData,iconRef);			//SetDataBrowserItemDataRGBColor(itemData,&rgbColor);			UpdateDataBrowserItems(browser,kDataBrowserNoItem,1,&itemID,kDataBrowserItemNoProperty,property);			break;	}	case kArgumentColumn:	{	/*		if(changeValue)		{		lc = LongChainFind(gRelocationEditorItems,itemID);		GetDataBrowserItemDataText(itemData,&cfStr);		//lc->arg = CFStringGetIntValue(cfStr);		InitCursor();		}		else		{		lc = LongChainFind(gRelocationEditorItems,itemID);		//NumToString(lc->arg,pStr);		cfStr = CFStringCreateWithPascalString(CFAllocatorGetDefault(),pStr,kCFStringEncodingMacRoman);		SetDataBrowserItemDataText(itemData,cfStr);		}	*/	break;	}	case kMnemonicColumn:	{		if(changeValue)		{			dirty = true;			SetWindowModified(gRelocEditorWindow,true);			SetWindowProperty(gRelocEditorWindow,kCreatorCode,kWindowDirty,sizeof(Boolean),&dirty);			lc = LongChainFind(gRelocationEditorItems,itemID);			temp=lc->opcode;			GetDataBrowserItemDataValue(itemData,&lc->opcode);//menu item number based translation			if(lc->opcode)			{			SetDataBrowserItemDataValue(itemData,lc->opcode);			UpdateDataBrowserItems(browser,kDataBrowserNoItem,1,&itemID,kDataBrowserItemNoProperty,property);						BuildRelocationCell(lc);						}			else{lc->opcode=temp;}		}		else		{		lc = LongChainFind(gRelocationEditorItems,itemID);		SetDataBrowserItemDataMenuRef(itemData,gRelocInstructionMenu);		SetDataBrowserItemDataValue(itemData,lc->opcode);		//UpdateDataBrowserItems(browser,kDataBrowserNoItem,1,&itemID,kDataBrowserItemNoProperty,property);		}	break;	}	case kDataBrowserItemIsEditableProperty:	{	SetDataBrowserItemDataBooleanValue(itemData, true);	break;	}	case kDataBrowserItemIsSelectableProperty:	{	//SetDataBrowserItemDataBooleanValue(itemData, true);	break;	}	default:return errDataBrowserPropertyNotSupported;}return noErr;}static pascal Boolean Relocations_AddDragItem(ControlRef browser, DragReference theDrag, DataBrowserItemID itemID, ItemReference* itemRef){Str255 string;OSErr err;err=AddDragItemFlavor(theDrag, *itemRef, 'dtRL', &itemID, sizeof(itemID), flavorSenderOnly);if(err){DebugFunction("\pDrag Error");}return true;}static pascal Boolean Relocations_AcceptDrag(ControlRef browser, DragReference theDrag, DataBrowserItemID itemID){DragItemRef			itemRef;FlavorType			theType;Boolean				rtrn=false;unsigned short		numItems;long				i;CountDragItems(theDrag,&numItems);for(i=1;i<=numItems;i++){GetDragItemReferenceNumber(theDrag,i,&itemRef);GetFlavorType(theDrag, itemRef, 1, &theType);if(theType=='dtRL'){rtrn=true;}else{rtrn=false;break;}}return rtrn;}static pascal Boolean Relocations_ReceiveDrag(ControlRef browser, DragReference theDrag, DataBrowserItemID itemID){DragItemRef			itemRef;DataBrowserItemID 	itemIDFromDrag;Size				dataSize;LongChain			*insertionPoint,*addingItem,*temp,*itemList;long				err;unsigned short		numItems;long				i;Boolean				higher,dirty;CountDragItems(theDrag,&numItems);GetDragItemReferenceNumber(theDrag,1,&itemRef);dataSize = sizeof(itemIDFromDrag);GetFlavorData(theDrag, itemRef, 'dtRL', &itemIDFromDrag, &dataSize, 0); itemList=0;itemList = NewLongChain(itemIDFromDrag,0,"\p"/*"\pundef"*/,0);if(numItems>1){	for(i=2;i<=numItems;i++)	{		GetDragItemReferenceNumber(theDrag,i,&itemRef);		dataSize = sizeof(itemIDFromDrag);		GetFlavorData(theDrag, itemRef, 'dtRL', &itemIDFromDrag, &dataSize, 0); 		higher = Relocations_ItemComparison(gAppControls.rlocBrowser,itemIDFromDrag,itemList->v,0);		if(higher)		{			while(itemList->prev)			{			higher = Relocations_ItemComparison(gAppControls.rlocBrowser,itemIDFromDrag,itemList->v,0);			if(!higher){break;}			higher=-1;			itemList=itemList->prev;			}		}		else		{			while(itemList->next)			{				higher = Relocations_ItemComparison(gAppControls.rlocBrowser,itemIDFromDrag,itemList->v,0);				if(higher){break;}				higher=-1;				itemList=itemList->next;			}		}		if(higher<0)		{higher = Relocations_ItemComparison(gAppControls.rlocBrowser,itemIDFromDrag,itemList->v,0);}		if(higher)		{		LongChainInsert(itemList,NewLongChain(itemIDFromDrag,0,"\p"/*"\pundef"*/,0),kBefore);		}		else		{		LongChainInsert(itemList,NewLongChain(itemIDFromDrag,0,"\p"/*"\pundef"*/,0),kAfter);		}			}}while(itemList->prev){itemList=itemList->prev;}for(i=0;i<numItems;i++){insertionPoint = LongChainFind(gRelocationEditorItems,itemID);if(!insertionPoint){DebugFunction("\parrrgh1");}temp = LongChainFind(gRelocationEditorItems,itemList->v);if(!temp){DebugFunction("\parrrgh2");}addingItem = LongChainCopy(temp);err=LongChainRemove(&gRelocationEditorItems,itemList->v);if(err){DebugFunction("\parrrgh3");}err=LongChainInsert(insertionPoint,addingItem,kAfter);if(err){DebugFunction("\parrrgh4");}itemID = itemList->v;if(itemList->next){itemList = itemList->next;}}while(itemList->prev){itemList=itemList->prev;}DestroyLongChain(itemList);err=SortDataBrowserContainer(browser,kDataBrowserNoItem,false);if(err){DebugFunction("\parrrgh5");}dirty = true;SetWindowModified(gRelocEditorWindow,true);SetWindowProperty(gRelocEditorWindow,kCreatorCode,kWindowDirty,sizeof(Boolean),&dirty);return true;}static pascal Boolean Relocations_ItemComparison(ControlRef browser, DataBrowserItemID itemOneID, DataBrowserItemID itemTwoID, DataBrowserPropertyID sortProperty){LongChain	*curr;curr=gRelocationEditorItems;while(curr){if(curr->v==itemOneID||curr->v==itemTwoID){break;}curr=curr->next;}if(curr->v==itemOneID){return true;}else{return false;}}static pascal void Relocations_ItemNotification(ControlRef browser, DataBrowserItemID itemID, DataBrowserItemNotification message){switch(message){	case kDataBrowserItemSelected:	{	LongChainAdd(&gRelocationEditorSelected,itemID,0,"\p"/*"\pundef"*/,0);	break;	}	case kDataBrowserItemDeselected:	{	if(!gRelocationRemovingSelection)	{LongChainRemove(&gRelocationEditorSelected,itemID);}	break;	}}}pascal void Relocations_CustomDrawItem(ControlRef browser,DataBrowserItemID item,DataBrowserPropertyID property,									DataBrowserItemState itemState,const Rect *theRect,SInt16 gdDepth,Boolean colorDevice){LongChain		*lc;BitMap			screen;Rect			src,dst,gworldRect,controlRect;Point			convert;CGrafPtr		port;GWorldPtr		offscreenGWorld;OSErr			err;void			*anErr;PicHandle		pic;Point			offsetPoint;long			i,dataSize;PicHandle		tempPic;Size			hsize;FileReference		dataFSS;void			*fRefNumber;Str255			pStr;lc = LongChainFind(gRelocationEditorItems,item);if(lc->args){	TextFont(FMGetFontFamilyFromName("\pLucida Grande"));	TextSize(13);	ForeColor (blackColor);	BackColor (whiteColor);		offsetPoint.h = theRect->left+1;	offsetPoint.v = theRect->top+3;	for(i=0;i<lc->args->count;i++)	{	SetRect(&src,offsetPoint.h,offsetPoint.v,offsetPoint.h+lc->args->dimension[i].h,offsetPoint.v+lc->args->dimension[i].v);	DrawPicture(gEditTextPic,&src);	MoveTo(src.left+4,src.bottom-6);	NumToString(lc->args->value[i],pStr);	DrawString(pStr);	offsetPoint.h += lc->args->dimension[i].h+12;	}}}pascal Boolean Relocations_CustomHitTest(ControlRef browser,DataBrowserItemID itemID,DataBrowserPropertyID property,const Rect *theRect,const Rect *mouseRect){LongChain			*lc;Point				offsetPoint;long				i;lc = LongChainFind(gRelocationEditorItems,itemID);if(lc->args){offsetPoint.h = theRect->left+4;offsetPoint.v = theRect->top+6;for(i=0;i<lc->args->count;i++){	if(mouseRect->top>offsetPoint.v && mouseRect->top<(offsetPoint.v+lc->args->dimension[i].v))	{		if(mouseRect->left>offsetPoint.h && mouseRect->left<(offsetPoint.h+lc->args->dimension[i].h))		{		return true;		}	}offsetPoint.h += lc->args->dimension[i].h+12;}}return false;}pascal SInt16 Relocations_CustomTracking(ControlRef browser,DataBrowserItemID itemID,DataBrowserPropertyID property,const Rect *theRect,Point startPt,EventModifiers modifiers){LongChain			*lc;Point				offsetPoint;long				i;EventRef			event;long				mouse=1,count=1;OSErr				err;CGrafPtr						port;GWorldPtr						offscreenGWorld;Rect							dst,theRect2,rect;Point	point;RgnHandle rgnHandle,rgn2Handle;long		controlType;Str255		pStr;char	*charBuffer;long	textSize,outSize;long			arg;CFStringRef		cfStr;rgnHandle = NewRgn();rgn2Handle = NewRgn();lc = LongChainFind(gRelocationEditorItems,itemID);if(lc->args){offsetPoint.h = theRect->left+4;offsetPoint.v = theRect->top+6;for(i=0;i<lc->args->count;i++){	if(startPt.v>offsetPoint.v && startPt.v<(offsetPoint.v+lc->args->dimension[i].v))	{		if(startPt.h>offsetPoint.h && startPt.h<(offsetPoint.h+lc->args->dimension[i].h))		{		if(gRelocCellSelected)		{		//GetDataBrowserItemPartBounds(gAppControls.rlocBrowser,gSelectedRelocItem->v,kArgumentColumn,kDataBrowserPropertyContentPart,&theRect2);		//GetControlBounds(gRelocEditCellControl,&theRect2);		//GetClip(rgnHandle);		//RectRgn(rgn2Handle,&theRect2);		//SetClip(rgn2Handle);		ClearKeyboardFocus(gRelocEditorWindow);		HideControl(gSelectedRelocCell);		//SetClip(rgnHandle);		gRelocCellSelected=false;		}		NumToString(lc->args->value[i],pStr);		SetControlData(gRelocEditCellControl, kControlEditTextPart,kControlEditTextTextTag,pStr[0],pStr+1);		controlType = lc->args->type[i];		SetControlProperty(gRelocEditCellControl,kCreatorCode,kControlType,sizeof(long),&controlType);		SizeControl(gRelocEditCellControl,lc->args->dimension[i].h-6,16);		MoveControl(gRelocEditCellControl,offsetPoint.h,offsetPoint.v);		ShowControl(gRelocEditCellControl);		SetKeyboardFocus(gRelocEditorWindow,gRelocEditCellControl,kControlEditTextPart);		gRelocCellSelected=true;		gSkipThisRun=true;		gSelectedRelocItem = lc;		gSelectedRelocItem->args->selector=i;		break;		}	}offsetPoint.h += lc->args->dimension[i].h+12;}}return -1;}pascal void Relocations_CustomDragRegion(ControlRef browser,DataBrowserItemID itemID,DataBrowserPropertyID property,const Rect *theRect,RgnHandle dragRgn){RectRgn(dragRgn,theRect);}